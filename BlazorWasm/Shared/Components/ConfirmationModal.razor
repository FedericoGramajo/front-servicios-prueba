@inject IJSRuntime js

<div class="modal fade" id="bsConfirmationModal" tabindex="-1" aria-labelledby="confirmationModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="confirmationModalLabel">
                    <i class="fa-solid fa-triangle-exclamation text-warning me-2"></i>@Title
                </h5>
                <button type="button" class="btn-close" @onclick="Cancel" disabled="@IsProcessing"></button>
            </div>
            <div class="modal-body">
                <p class="mb-0">@Message</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-outline-secondary" @onclick="Cancel" disabled="@IsProcessing">Cancelar</button>
                <button type="button" class="btn @ButtonClass" @onclick="Confirm" disabled="@IsProcessing">
                    @if (IsProcessing)
                    {
                        <span class="spinner-border spinner-border-sm me-1" role="status"></span>
                        <span>Procesando...</span>
                    }
                    else
                    {
                        @ButtonText
                    }
                </button>
            </div>
        </div>
    </div>
</div>

@code {
    [Parameter] public string Title { get; set; } = "Confirmación";
    [Parameter] public string Message { get; set; } = "¿Estás seguro?";
    [Parameter] public string ButtonText { get; set; } = "Confirmar";
    [Parameter] public string ButtonClass { get; set; } = "btn-danger";
    [Parameter] public bool IsProcessing { get; set; }

    [Parameter] public EventCallback OnConfirm { get; set; }
    [Parameter] public EventCallback OnCancel { get; set; }

    public async Task Show()
    {
        await js.InvokeVoidAsync("ShowConfirmationModal");
    }

    public async Task Hide()
    {
        await js.InvokeVoidAsync("HideConfirmationModal");
    }

    private async Task Confirm()
    {
        await OnConfirm.InvokeAsync();
    }

    private async Task Cancel()
    {
        await Hide();
        await OnCancel.InvokeAsync();
    }
}
